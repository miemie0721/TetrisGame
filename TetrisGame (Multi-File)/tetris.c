#include "tetris.h"


//初始动画数组
char TitleAnimation[11][9][300] = {
    // 第1帧（显示左侧1/9内容）
    {
        "┌────────────────────────────────────────────────────────────────────────────────────────────────┐",
        "│                                                                                                │",
        "│     ██                                                                                         │",
        "│    ██╔                                                                                         │",
        "│    ██║                                                                                         │",
        "│    ██║                                                                                         │",
        "│    ╚██████╔╝██                                                                                 │",
        "│                                                                                                │",
        "└────────────────────────────────────────────────────────────────────────────────────────────────┘"
    },
    
    // 第2帧（显示左侧2/9内容）
    {
        "┌────────────────────────────────────────────────────────────────────────────────────────────────┐",
        "│                                                                                                │",
        "│     ██████                                                                                     │",
        "│    ██╔═══██╗██                                                                                 │",
        "│    ██║   ██║███                                                                                │",
        "│    ██║   ██║██╔══██╗                                                                           │",
        "│    ╚██████╔╝██║  ██║╚██                                                                        │",
        "│                                                                                                │",
        "└────────────────────────────────────────────────────────────────────────────────────────────────┘"
    },
    
    // 第3帧（显示左侧3/9内容）
    {
        "┌────────────────────────────────────────────────────────────────────────────────────────────────┐",
        "│                                                                                                │",
        "│     ██████╗ ██████╗                                                                            │",
        "│    ██╔═══██╗██╔══██╗██║                                                                        │",
        "│    ██║   ██║██████╔╝██║                                                                        │",
        "│    ██║   ██║██╔══██╗██║   ██║                                                                  │",
        "│    ╚██████╔╝██║  ██║╚██████╔╝████                                                              │",
        "│                                                                                                │",
        "└────────────────────────────────────────────────────────────────────────────────────────────────┘"
    },
    
    // 第4帧（显示左侧4/9内容）
    {
        "┌────────────────────────────────────────────────────────────────────────────────────────────────┐",
        "│                                                                                                │",
        "│     ██████╗ ██████╗ ██╗   ██╗███                                                               │",
        "│    ██╔═══██╗██╔══██╗██║   ██║██╔═                                                              │",
        "│    ██║   ██║██████╔╝██║   ██║███████                                                           │",
        "│    ██║   ██║██╔══██╗██║   ██║╚════██                                                           │",
        "│    ╚██████╔╝██║  ██║╚██████╔╝███████║       █                                                  │",
        "│                                                                                                │",
        "└────────────────────────────────────────────────────────────────────────────────────────────────┘"
    },
    
    // 第5帧（显示左侧5/9内容）
    {
        "┌────────────────────────────────────────────────────────────────────────────────────────────────┐",
        "│                                                                                                │",
        "│     ██████╗ ██████╗ ██╗   ██╗███████╗    █████                                                 │",
        "│    ██╔═══██╗██╔══██╗██║   ██║██╔════╝    ╚══██╔═                                               │",
        "│    ██║   ██║██████╔╝██║   ██║███████╗       ██║   ███                                          │",
        "│    ██║   ██║██╔══██╗██║   ██║╚════██║       ██║   ██╔═                                         │",
        "│    ╚██████╔╝██║  ██║╚██████╔╝███████║       ██║   ███████╗   █                                 │",
        "│                                                                                                │",
        "└────────────────────────────────────────────────────────────────────────────────────────────────┘"
    },
    
    // 第6帧（显示左侧6/9内容）
    {
        "┌────────────────────────────────────────────────────────────────────────────────────────────────┐",
        "│                                                                                                │",
        "│     ██████╗ ██████╗ ██╗   ██╗███████╗    ████████╗██████                                       │",
        "│    ██╔═══██╗██╔══██╗██║   ██║██╔════╝    ╚══██╔══╝██╔════╝                                     │",
        "│    ██║   ██║██████╔╝██║   ██║███████╗       ██║   █████╗     ██║                               │",
        "│    ██║   ██║██╔══██╗██║   ██║╚════██║       ██║   ██╔══╝     ██║   ██╔═══                      │",
        "│    ╚██████╔╝██║  ██║╚██████╔╝███████║       ██║   ███████╗   ██║   ███████╗█                   │",
        "│                                                                                                │",
        "└────────────────────────────────────────────────────────────────────────────────────────────────┘"
    },
    
    // 第7帧（显示左侧7/9内容）
    {
        "┌────────────────────────────────────────────────────────────────────────────────────────────────┐",
        "│                                                                                                │",
        "│     ██████╗ ██████╗ ██╗   ██╗███████╗    ████████╗███████╗████████╗███                         │",
        "│    ██╔═══██╗██╔══██╗██║   ██║██╔════╝    ╚══██╔══╝██╔════╝╚══██╔══╝██╔═══                      │",
        "│    ██║   ██║██████╔╝██║   ██║███████╗       ██║   █████╗     ██║   █████╗  ████                │",
        "│    ██║   ██║██╔══██╗██║   ██║╚════██║       ██║   ██╔══╝     ██║   ██╔══╝  ██╔══██╗            │",
        "│    ╚██████╔╝██║  ██║╚██████╔╝███████║       ██║   ███████╗   ██║   ███████╗██║  ██║██          │",
        "│                                                                                                │",
        "└────────────────────────────────────────────────────────────────────────────────────────────────┘"
    },
    
    // 第8帧（显示左侧8/9内容）
    {
        "┌────────────────────────────────────────────────────────────────────────────────────────────────┐",
        "│                                                                                                │",
        "│     ██████╗ ██████╗ ██╗   ██╗███████╗    ████████╗███████╗████████╗███████╗██████╗ ████        │",
        "│    ██╔═══██╗██╔══██╗██║   ██║██╔════╝    ╚══██╔══╝██╔════╝╚══██╔══╝██╔════╝██╔══██╗██╔═══      │",
        "│    ██║   ██║██████╔╝██║   ██║███████╗       ██║   █████╗     ██║   █████╗  ██████╔╝███████╗    │",
        "│    ██║   ██║██╔══██╗██║   ██║╚════██║       ██║   ██╔══╝     ██║   ██╔══╝  ██╔══██╗╚════██║    │",
        "│    ╚██████╔╝██║  ██║╚██████╔╝███████║       ██║   ███████╗   ██║   ███████╗██║  ██║███████║    │",
        "│                                                                                                │",
        "└────────────────────────────────────────────────────────────────────────────────────────────────┘"
    },
    
    // 第9帧（显示完整内容）
    {
        "┌────────────────────────────────────────────────────────────────────────────────────────────────┐",
        "│                                                                                                │",
        "│     ██████╗ ██████╗ ██╗   ██╗███████╗    ████████╗███████╗████████╗███████╗██████╗ ███████╗    │",
        "│    ██╔═══██╗██╔══██╗██║   ██║██╔════╝    ╚══██╔══╝██╔════╝╚══██╔══╝██╔════╝██╔══██╗██╔════╝    │",
        "│    ██║   ██║██████╔╝██║   ██║███████╗       ██║   █████╗     ██║   █████╗  ██████╔╝███████╗    │",
        "│    ██║   ██║██╔══██╗██║   ██║╚════██║       ██║   ██╔══╝     ██║   ██╔══╝  ██╔══██╗╚════██║    │",
        "│    ╚██████╔╝██║  ██║╚██████╔╝███████║       ██║   ███████╗   ██║   ███████╗██║  ██║███████║    │",
        "│                                                                                                │",
        "└────────────────────────────────────────────────────────────────────────────────────────────────┘"
    },
       
    // 第10帧（闪烁效果 - 全亮）
    {
        "┌────────────────────────────────────────────────────────────────────────────────────────────────┐",
        "│                                                                                                │",
        "│     ██████╗ ██████╗ ██╗   ██╗███████╗    ████████╗███████╗████████╗███████╗██████╗ ███████╗    │",
        "│    ██╔═══██╗██╔══██╗██║   ██║██╔════╝    ╚══██╔══╝██╔════╝╚══██╔══╝██╔════╝██╔══██╗██╔════╝    │",
        "│    ██║   ██║██████╔╝██║   ██║███████╗       ██║   █████╗     ██║   █████╗  ██████╔╝███████╗    │",
        "│    ██║   ██║██╔══██╗██║   ██║╚════██║       ██║   ██╔══╝     ██║   ██╔══╝  ██╔══██╗╚════██║    │",
        "│    ╚██████╔╝██║  ██║╚██████╔╝███████║       ██║   ███████╗   ██║   ███████╗██║  ██║███████║    │",
        "│                                                                                                │",
        "└────────────────────────────────────────────────────────────────────────────────────────────────┘"
    },

    // 第11帧（闪烁效果 - 全暗）
    {
        "┌────────────────────────────────────────────────────────────────────────────────────────────────┐",
        "│                                                                                                │",
        "│                                                                                                │",
        "│                                                                                                │",
        "│                                                                                                │",
        "│                                                                                                │",
        "│                                                                                                │",
        "│                                                                                                │",
        "└────────────────────────────────────────────────────────────────────────────────────────────────┘"
    },
};



//玩家数据
PlayerRecord player_record = {0, 0, 0};


//坐标位置相关旋转算法                         
int BLOCK_Sort[7][4][2] = {
    {{0,1}, {0,0}, {0,2}, {1,1}},//T型
    {{0,1}, {0,0}, {1,0}, {1,1}},//O型
    {{0,1}, {0,0}, {0,2}, {0,3}},//I型
    {{0,2}, {0,0}, {0,1}, {1,2}},//J型
    {{1,2}, {1,0}, {1,1}, {0,2}},//L型
    {{0,1}, {0,0}, {1,1}, {1,2}},//Z型
    {{1,1}, {1,0}, {0,1}, {0,2}} //S型
};

//变量初始化
int BLOCK_Current[5][2]={0};
int array[CMD_HEIGHT][CMD_LENGTH]={0};
int x_new=0;
int y_new=0;
int score = 0;
bool game_over = false;
bool pause = false;

//计时（下落）
clock_t last_drop_time = 0;
int drop_interval_ms = 700;

//等级
int level = 1;
int level1= 1;

// 连击数
int combo = 0;
int max_combo = 0;

int speed_setting=0;
int autosaving_setting=1;